/* ========================================
   MODERN CSS FEATURES - Advanced CSS Properties
   ======================================== */

/* Container Queries for Responsive Components */
@container (min-width: 400px) {
  .card {
    padding: 2.5rem 2rem;
  }
  
  .status-card {
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: 1rem;
    align-items: center;
  }
}

@container (min-width: 600px) {
  .charts-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .quick-actions {
    grid-template-columns: repeat(4, 1fr);
  }
}

@container (min-width: 800px) {
  .executive-grid {
    grid-template-columns: repeat(4, 1fr);
  }
  
  .stats-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}

/* CSS Grid Advanced Layouts */
.dashboard-grid {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  grid-template-rows: auto auto 1fr;
  gap: 2rem;
  grid-template-areas:
    "hero hero hero hero hero hero hero hero hero hero hero hero"
    "stats stats stats stats summary summary summary summary actions actions actions actions"
    "charts charts charts charts charts charts widgets widgets widgets widgets widgets widgets";
}

.hero-section { grid-area: hero; }
.stats-section { grid-area: stats; }
.summary-section { grid-area: summary; }
.actions-section { grid-area: actions; }
.charts-section { grid-area: charts; }
.widgets-section { grid-area: widgets; }

/* Subgrid Support */
.nested-grid {
  display: grid;
  grid-template-columns: subgrid;
  grid-column: span 6;
}

/* CSS Logical Properties */
.card {
  margin-block: 1rem;
  margin-inline: 0;
  padding-block: 2rem;
  padding-inline: 1.75rem;
  border-inline-start: 4px solid var(--primary-color);
}

.btn {
  padding-block: 0.75rem;
  padding-inline: 1.5rem;
  margin-inline-end: 0.5rem;
}

/* Advanced Selectors */
.card:has(.status-critical) {
  border-color: #ef4444;
  background: linear-gradient(145deg, #fef2f2 0%, #ffffff 100%);
}

.card:has(.status-warning) {
  border-color: #f59e0b;
  background: linear-gradient(145deg, #fef9e7 0%, #ffffff 100%);
}

.table-row:has(.checkbox-input:checked) {
  background: rgba(99, 102, 241, 0.08);
  border-left: 4px solid #6366f1;
}

/* Modern Color Functions */

.status-card--ok {
  background: color-mix(in srgb, #10b981 5%, white 95%);
  border-color: color-mix(in srgb, #10b981 20%, transparent 80%);
}

/* CSS Nesting */
.dashboard-hero {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #a855f7 100%);
  
  & .hero-title {
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    line-height: 1.2;
    
    & h1 {
      margin: 0;
      background: linear-gradient(90deg, #ffffff 0%, #e0e7ff 100%);
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }
  }
  
  & .hero-actions {
    display: flex;
    gap: 1rem;
    
    & .btn {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      
      &:hover {
        transform: translateY(-2px);
      }
      
      &:active {
        transform: translateY(0);
      }
    }
  }
}

/* Modern Units and Functions */
.card {
  padding: max(1rem, 2vw);
  margin-bottom: clamp(1rem, 3vw, 2rem);
  border-radius: max(12px, 1vw);
  font-size: clamp(0.875rem, 2.5vw, 1rem);
}

.dashboard-container {
  padding: max(1rem, 5vw);
  gap: clamp(1rem, 3vw, 2rem);
}

.status-value {
  font-size: clamp(1.5rem, 5vw, 2rem);
}

/* CSS Custom Properties with Fallbacks */
.theme-adaptive {
  background: light-dark(#ffffff, #1e293b);
  color: light-dark(#1e293b, #ffffff);
  border-color: light-dark(#e2e8f0, #475569);
}

/* Anchor Positioning (Future) */
.tooltip {
  position: absolute;
  position-anchor: --tooltip-anchor;
  top: anchor(bottom);
  left: anchor(center);
  translate: -50% 0.5rem;
}

.tooltip-anchor {
  anchor-name: --tooltip-anchor;
}

/* View Transitions API */
::view-transition-old(root),
::view-transition-new(root) {
  animation-duration: 0.3s;
}

::view-transition-old(card) {
  animation: slide-out 0.3s ease-in;
}

::view-transition-new(card) {
  animation: slide-in 0.3s ease-out;
}

@keyframes slide-out {
  to { transform: translateX(-100%); }
}

@keyframes slide-in {
  from { transform: translateX(100%); }
}

/* Scroll-driven Animations */
@scroll-timeline header-scroll {
  source: scrolling-element(root);
  orientation: vertical;
}

.dashboard-hero {
  animation: header-parallax linear;
  animation-timeline: header-scroll;
  animation-range: 0% 100px;
}

@keyframes header-parallax {
  to {
    transform: translateY(-20px);
    opacity: 0.8;
  }
}

/* Advanced Backdrop Filters */
.modal-overlay {
  backdrop-filter: 
    blur(12px) 
    saturate(1.8) 
    brightness(0.7);
}

.glass-card {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: 
    blur(20px) 
    saturate(1.5);
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

/* CSS Masks and Clip Paths */
.card-mask {
  mask: 
    linear-gradient(45deg, black 0%, transparent 100%),
    radial-gradient(circle at center, black 60%, transparent 70%);
  mask-composite: intersect;
}

.hero-clip {
  clip-path: polygon(0 0, 100% 0, 95% 100%, 0 90%);
}

/* Advanced Grid Features */
.masonry-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  grid-template-rows: masonry;
  gap: 1.5rem;
}

.card-auto-fit {
  grid-column: span auto;
  grid-row: span auto;
}

/* CSS Functions */
.dynamic-spacing {
  padding: calc(1rem + 2vw);
  margin: max(1rem, env(safe-area-inset-top));
  gap: min(2rem, 5vw);
}

.responsive-font {
  font-size: clamp(1rem, 2.5vw, 1.25rem);
  line-height: calc(1.5em + 0.2vw);
}

/* Modern Pseudo-selectors */
.btn:focus-visible {
  outline: 2px solid color-mix(in srgb, currentColor 50%, transparent 50%);
  outline-offset: 2px;
}

.input-group:focus-within {
  box-shadow: 0 0 0 3px color-mix(in srgb, #6366f1 20%, transparent 80%);
}

.card:hover:focus-within {
  transform: translateY(-6px);
  box-shadow: 
    0 20px 40px rgba(99, 102, 241, 0.15),
    0 8px 16px rgba(0, 0, 0, 0.1);
}

/* CSS Layers */
@layer base {
  .card {
    display: block;
    background: white;
  }
}

@layer components {
  .card {
    border-radius: 16px;
    padding: 2rem;
  }
}

@layer utilities {
  .card {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
  }
}

/* Modern Media Queries */
@media (width >= 768px) and (width < 1024px) {
  .tablet-specific {
    display: block;
  }
}

@media (height >= 800px) {
  .tall-screen {
    min-height: 100vh;
  }
}

@media (resolution >= 2dppx) {
  .high-res {
    background-image: url('high-res-bg.png');
  }
}

@media (prefers-color-scheme: dark) and (prefers-contrast: high) {
  .adaptive-theme {
    background: #000000;
    color: #ffffff;
    border: 2px solid #ffffff;
  }
}

/* Container Query Units */
.responsive-card {
  padding: 2cqw 2cqh;
  font-size: clamp(1rem, 3cqw, 1.25rem);
  border-radius: max(8px, 1cqmin);
}

/* Modern Transforms */
.interactive-3d {
  transform-style: preserve-3d;
  transition: transform 0.3s ease;
}

.interactive-3d:hover {
  transform: 
    perspective(1000px) 
    rotateX(5deg) 
    rotateY(5deg) 
    translateZ(20px);
}

/* CSS Scroll Snap */
.horizontal-scroll {
  display: flex;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
}

.scroll-item {
  flex: 0 0 300px;
  scroll-snap-align: start;
  scroll-margin-left: 1rem;
}

/* Advanced Animations */
@property --gradient-angle {
  syntax: '<angle>';
  initial-value: 0deg;
  inherits: false;
}

.animated-gradient {
  background: linear-gradient(var(--gradient-angle), #6366f1, #8b5cf6, #a855f7);
  animation: rotate-gradient 3s linear infinite;
}

@keyframes rotate-gradient {
  to { --gradient-angle: 360deg; }
}

/* Performance Optimizations */
.gpu-optimized {
  will-change: transform, opacity;
  contain: layout style paint;
}

.layout-optimized {
  content-visibility: auto;
  contain-intrinsic-size: 300px;
}

/* Accessibility Enhancements */
@media (prefers-reduced-motion: no-preference) {
  .smooth-animation {
    animation: smooth-slide 0.3s ease-out;
  }
}

@keyframes smooth-slide {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Future CSS Features (Progressive Enhancement) */
@supports (display: grid) and (grid-template-rows: masonry) {
  .masonry-layout {
    display: grid;
    grid-template-rows: masonry;
  }
}

@supports (color: color-mix(in srgb, red, blue)) {
  .modern-colors {
    background: color-mix(in srgb, var(--primary-color) 80%, white 20%);
  }
}

@supports (anchor-name: --test) {
  .positioned-tooltip {
    position: absolute;
    position-anchor: --tooltip-target;
  }
}

/* Print Optimizations */
@media print {
  .dashboard-hero {
    background: none !important;
    color: black !important;
  }
  
  .card {
    break-inside: avoid;
    box-shadow: none;
    border: 1px solid #ccc;
  }
  
  .btn {
    display: none;
  }
}